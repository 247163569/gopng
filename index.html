<!DOCTYPE html>
<!--<html manifest="cache.manifest">-->
<html>
	<head>
		<meta charset="utf-8" />
		<meta author="duwei pandorid[at]gmail.com" />
		<meta version="0.1.1alpha" />
		<meta name="description" content="html5 css sprite tool gopng" />
		<title>GoPng</title>
		<link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="http://qplus1.idqqimg.com/module/common/scrollbar/scrollstyle.css">
		<style>
			#canvas {
				border:1px solid #c3c3c3;
			}
			img {
				border:1px solid yellow;
			}
			#layout {
				position: relative;
				overflow: auto;
			}
			#grid_canvas{
				position: absolute;
				o:0px;
				top:0px;
			}
			#zoom_canvas{
				position: absolute;
				o:0px;
				top:0px;
				display: none;
			}
			#css_html_template, #png_out, #css_out, #export{
				display: none;
			}
			.png_and_css{
				-webkit-transition:background-color .5s ease-in-out;
				transition:all .5s ease-in-out;
			}
			.yellow_inform {
				background-color: yellow;
			}
			#png_link, #css_link{
				display: none;
			}
			#absolute_path, #relative_path, #css_template{
				width: 580px;
			}
			.github_icon{
				width: 18px;
				height: 18px;
				background:url(./img/github_icon.png) no-repeat 0px 2px;
				float:left;
			}
			#ta{
				display: none;
			}

		</style>
	</head> 
	<body>
		<p></p>
		<div class="container">

			<div class="row">
				<div class="span8">
					<ul class="nav nav-tabs">
						<li class="active" data-toggle="layout" >
							<a href="###">Canvas</a>
						</li>
						<li class="" data-toggle="css_html_template">
							<a href="###">Css Template</a>
						</li>
						<li class="" data-toggle="png_out" >
							<a href="###" class="png_and_css">Png</a>
						</li>
						<li class="" data-toggle="css_out" >
							<a href="###" class="png_and_css">CSS</a>
						</li>
						<li class="" data-toggle="export" >
							<a href="###" class="png_and_css">Export</a>
						</li>
					</ul>
					<div id="layout">
						<canvas id="grid_canvas">
							You browser does not support the canvas elements.
						</canvas>
						<canvas id="canvas">
							You browser does not support the canvas elements.
						</canvas>
						<canvas id="zoom_canvas">
							You browser does not support the canvas elements.
						</canvas>
					</div>
					<div id="css_html_template">
						<form class="form-horizontal">
							<fieldset>
								<h6>Css template</h6>
								<div class="control-group">
									<label class="control-label">Sprite absolute path</label>
									<div class="controls docs-input-sizes">
										<input class="input-xlarge" type="text" placeholder='' id="absolute_path" />
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Sprite relative path</label>
									<div class="controls docs-input-sizes">
										<input class="input-xlarge" type="text" placeholder='' id="relative_path" />
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Css Template</label>
									<div class="controls">
										<textarea class="input-xlarge" id="css_template" rows="25">
										</textarea>

										<p class="help-block">Using John Resig's Micro-Templating</p>
										<p class="help-block">Variables can be uesd: relative_path, absolute_path, x, y, w, h, name</p>
										<p>
											<img src="./img/cord.png" title="about x,y,w,h" />
										</p>
										<p>name for fileName without ext</p>
									</div>
								</div>
								<div class="form-actions">
									<button type="submit" class="btn btn-primary" id="css_template_apply">Apply changes</button>
									<button class="btn" id="css_template_reset">Reset</button>
								</div>
							</fieldset>
						</form>
					</div>
					<div id="png_out">
						<div class="row">
								<div class="span2">
									<p>
										<a id="png_link" download="sprite.png" target="_blank" title="download png" href="###">
											<button class="btn btn-info">
												<i class="icon-file icon-white"></i>Download
											</button>
										</a>
									</p>
								</div>
								<div class="span2">

								</div>
						</div>
						<div id="img"></div>
					</div>
					<div id="css_out">
						<p>
							<a class="btn btn-info" id="css_link" download="style.css" target="_blank" title="download css" href="###"><i class="icon-file icon-white"></i>Download</a>
						</p>
						<h6>css code:</h6>
						<pre id="target_css">
						</pre>
					</div>
					<div id="export">
						<div class="hero-unit">
							<h1>Export!</h1>
							<p>Export and save the file, then you can recover your workspace by drop it on the canvas next time!</p>
							<p>
								<a class="btn btn-primary btn-large" download="export.json" id="export_workspace" href="###">Export</a>
							</p>
						</div>
					</div>
					
					<p>
						<div class="alert">
						  <button class="close" data-dismiss="alert" id="browser_notice">Ã—</button>
						  <strong>Notice!</strong> This HTML5 app is only tested for Chrome 18+(recommend) and Firefox 10+ now.
						</div>
					</p>
					
				</div>
				<div class="span4">
					<div class="well">
						<div class="row">
							<div class="span1">
								<h3>Go!PNG</h3>
							</div>
							<div class="offset2">
								<button class="btn btn-success" id="make">Make Png & css</button>
							</div>
						</div>
						<form class="form-horizontal">
							<fieldset>
								<h6>Canvas sizes</h6>
								<div class="control-group">
									<label class="control-label">Canvas width</label>
									<div class="controls docs-input-sizes">
										<input class="input-small" type="text" placeholder='' id="canvas_width" />
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Canvas Height</label>
									<div class="controls docs-input-sizes">
										<input class="input-small" type="text" placeholder='' id="canvas_height" />
									</div>
								</div>
								<div class="form-actions">
									<button type="submit" class="btn btn-primary" id="canvas_sizes_apply">Apply changes</button>
								</div>
							</fieldset>
							<fieldset>
								<h6>Packer modes</h6>
								<div class="control-group">
									<label class="control-label">Fixed Size</label>
									<div class="controls">
										<div class="btn-group" id="packer_modes_fixed">
											<button class="btn btn-primary" id="vertical">Vertical</button>
											<button class="btn btn-primary" id="bintree">BinTree</button>
										</div>
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Auto Grow</label>
									<div class="controls">
										<div class="btn-group" id="packer_modes_grow">
											<!--<button class="btn btn-primary disabled" id="verticalGrow" onclick="return false;">Vertical</button>-->
											<button class="btn btn-primary" id="bintreeGrow" onclick="return false;">BinTree</button>
										</div>
									</div>
								</div>
								<div class="form-actions">
								</div>
							</fieldset>
							<fieldset>
								<h6>Zoom setting</h6>
								<div class="control-group">
									<label class="control-label">Zoom mode</label>
									<div class="controls">
										<div class="btn-group" id="zoom_factors">
											<button class="btn btn-primary" id="1x">1X</button>
											<button class="btn btn-primary" id="2x">2X</button>
											<button class="btn btn-primary" id="4x">4X</button>
										</div>
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Zoom raduis</label>
									<div class="controls docs-input-sizes">
										<input class="input-small" type="text" placeholder='' id="zoom_setting_value" />
									</div>
								</div>
								<div class="form-actions">
									<button type="submit" class="btn btn-primary" id="zoom_setting_apply">Apply changes</button>
								</div>
							</fieldset>
							<fieldset>
								<h6>Magnet setting</h6>
								<div class="control-group">
									<label class="control-label">Magnet</label>
									<div class="controls">
										<button class="btn btn-primary" id="magnet">Magnet!</button>
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Magnet distance</label>
									<div class="controls docs-input-sizes">
										<input class="input-small" type="text" placeholder='' id="magnet_setting_value"/>
									</div>
								</div>
								<div class="form-actions">
									<button type="submit" class="btn btn-primary" id="magnet_setting_apply">Apply changes</button>
								</div>
							</fieldset>
						</form>
						<p>
							<a class="btn" style="margin-left:100px;" title="view on github" href="https://github.com/AlloyTeam/gopng" target="_blank"><span class="github_icon"></span>View On GitHub</a>
						</p>
						<p>
							<a class="btn" style="margin-left:100px;" title="view on github" href="http://www.alloyteam.com/2012/05/gopng%E9%9B%AA%E7%A2%A7%E5%9B%BE%E5%90%88%E6%88%90%E5%B7%A5%E5%85%B7-%E5%8F%A6%E4%B8%80%E4%B8%AAhtml5-app/" target="_blank"><i class="icon-book"></i>&nbspGet some help&nbsp</a>
						</p>
					</div>
				</div>

			</div>
		</div>
	<script>
	(function(A){function G(a){var c,d,p="",i=[],g=0;d=c=0;for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("");d=a.charCodeAt(c++);)128>d?i[i.length]=d:(2048>d?i[i.length]=192|d>>6:(65536>d?i[i.length]=224|d>>12:(i[i.length]=240|d>>18,i[i.length]=128|d>>12&63),i[i.length]=128|d>>6&63),i[i.length]=128|d&63);for(;g<i.length;)a=i[g++],c=i[g++],d=i[g++],p+=b[a>>2],p+=b[(a&3)<<4|c>>4],p+=b[void 0===c?64:(c&15)<<2|d>>6],p+=b[void 0===d?64:d&63];return p}var A=window[A]={},
b={canvas_width:600,canvas_height:600,packer_mode:"bintree",if_magnet:!0,magnet_distance:8,if_zoom:!0,zoom_pixel:!0,zoom:2,zoom_radius:200,absolute_path:"http://gopng/static/images/sprite.png",relative_path:"",template:'#gopng_<%=name%>_outer {\nheight: <%=h%>px;\nwidth: <%=w%>px;\noverflow: hidden;\n}\n#gopng_<%=name%> {\nbackground: url(<%=absolute_path%>) -<%=x%>px -<%=y%>px no-repeat;\nwidth: 100%;\nheight: 100%;\n_background: none;\n_padding-left: <%=x%>px;\n_margin-left: -<%=x%>px;\n_padding-top: <%=y%>px;\n_margin-top: -<%=y%>px;\n_filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=crop,src="<%=absolute_path%>");\n}\n'},
H,I,j=document.getElementById("canvas");document.getElementById("grid_canvas").getContext("2d");var o=document.getElementById("zoom_canvas"),s=o.getContext("2d"),h=j.getContext("2d"),k=[],t=function(){var a,c,d=function(){s.clearRect(0,0,b.canvas_width*b.zoom,b.canvas_height*b.zoom)};return{setXY:function(d,i){a=parseInt(d);c=parseInt(i)},snap:function(){if(D&&b.if_zoom){var d=b.zoom_radius,i=b.zoom;t.clear();if(b.zoom_pixel){for(var g=Math.floor(d/i),e=2*g,m=2*g,i=a,f=c,B=2*d,C=2*d,g=h.getImageData(a-
g,c-g,e,m).data,k=h.createImageData(B,C),j=k.data,o=[],n=e/B,l=0,q=0;q<B;++q)o[q]=4*Math.floor(l),l+=n;n=[];l=m/C;for(q=m=0;q<C;++q)n[q]=4*e*Math.floor(m),m+=l;for(m=e=0;m<C;++m)for(l=0;l<B;++l)q=o[l]+n[m],j[e++]=g[q++],j[e++]=g[q++],j[e++]=g[q++],j[e++]=g[q++];s.putImageData(k,i,f)}s.globalCompositeOperation="destination-in";s.beginPath();s.arc(a+d,c+d,d,2*Math.PI,!1);s.fill();s.globalCompositeOperation="source-over"}},destory:function(){d();o.style.display="none";zoom_canvas_bg.style.display="none"},
clear:d,init:function(){o.style.display="block"}}}(),l=function(){h.clearRect(0,0,j.width,j.height);k.map(function(a){h.drawImage(a.el,a.x,a.y)});u&&u();t.snap()},v=function(){j.height=b.canvas_height;j.width=b.canvas_width;o.height=2*b.canvas_height;o.width=2*b.canvas_width;l()},R=function(){if(k.length){O();J();l();dataURL=j.toDataURL();var a=new Image;a.src=dataURL;e("png_link").href=dataURL.replace("data:image/","data:image/");e("png_link").style.display="inline";document.getElementById("img").innerHTML=
"";document.getElementById("img").appendChild(a);J(b.canvas_width,b.canvas_height);l();var c=[];k.map(function(a){a=P(b.template,{w:a.w,h:a.h,x:a.x,y:a.y,absolute_path:b.absolute_path,name:a.name.split(".")[0],relative_path:b.relative_path});c.push(a)});a=c.join("").split("[enter]").join("\n");e("css_link").href="data:text/css;base64,"+G(a);e("target_css").innerHTML=Q(a);e("css_link").style.display="inline"}},Q=function(a){return a=a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,
"&quot;").replace(/'/g,"&#39;")},J=function(a,c){!a&&!c?(j.width=I,j.height=H):(j.width=a,j.height=c)},r=function(){},K=function(){v();var a=0;k.map(function(c){c.y=a;c.x=0;a+=c.h})},L=function(){var a=function(a,d){this.init(a,d)};a.prototype={init:function(a,d){this.root={x:0,y:0,w:a,h:d}},fit:function(a){var d,b=this;a.map(function(a){if(d=b.findNode(b.root,a.w,a.h)){var c=b.splitNode(d,a.w,a.h);a.x=c.x;a.y=c.y}})},findNode:function(a,d,b){return a.used?this.findNode(a.right,d,b)||this.findNode(a.down,
d,b):d<=a.w&&b<=a.h?a:null},splitNode:function(a,d,b){a.used=!0;a.down={x:a.x,y:a.y+b,w:a.w,h:a.h-b};a.right={x:a.x+d,y:a.y,w:a.w-d,h:b};return a}};return function(){v();var c=new a(b.canvas_width,b.canvas_height);k.sort(function(a,c){return 0!=c.h-a.h?c.h-a.h:a.w-c.w});c.fit(k)}}(),M=function(){Packer=function(){};Packer.prototype={fit:function(a){var c,d=a.length,b=this;this.root={x:0,y:0,w:d?a[0].w:0,h:d?a[0].h:0};a.map(function(a){var d=(c=b.findNode(b.root,a.w,a.h))?b.splitNode(c,a.w,a.h):b.growNode(a.w,
a.h);a.x=d.x;a.y=d.y});return this.root},findNode:function(a,c,d){return a.used?this.findNode(a.right,c,d)||this.findNode(a.down,c,d):c<=a.w&&d<=a.h?a:null},splitNode:function(a,c,d){a.used=!0;a.down={x:a.x,y:a.y+d,w:a.w,h:a.h-d};a.right={x:a.x+c,y:a.y,w:a.w-c,h:d};return a},growNode:function(a,c){var d=c<=this.root.h,b=a<=this.root.w,i=b&&this.root.w>=this.root.h+c;if(d&&this.root.h>=this.root.w+a)return this.growRight(a,c);if(i)return this.growDown(a,c);if(d)return this.growRight(a,c);if(b)return this.growDown(a,
c)},growRight:function(a,c){this.root={used:!0,x:0,y:0,w:this.root.w+a,h:this.root.h,down:this.root.down,right:{x:this.root.w,y:0,w:a,h:this.root.h}};node=this.findNode(this.root,a,c);return this.splitNode(node,a,c)},growDown:function(a,c){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+c,down:{x:0,y:this.root.h,w:this.root.w,h:c},right:this.root.right};node=this.findNode(this.root,a,c);return this.splitNode(node,a,c)}};return function(){var a=new Packer;k.length&&(k.sort(function(a,d){return 0!=
d.h-a.h?d.h-a.h:a.w-d.w}),a=a.fit(k),b.canvas_width=a.w,b.canvas_height=a.h,v(),e("canvas_width").value=b.canvas_width,e("canvas_height").value=b.canvas_height)}}(),O=function(){var a=k.reduce(function(a,b){return a.w+a.x>b.w+b.x?a:b}),b=k.reduce(function(a,b){return a.h+a.y>b.h+b.y?a:b});H=b.h+b.y;I=a.w+a.x};o.ondragenter=j.ondragenter=function(){return!1};o.ondragover=j.ondragover=function(){return!1};o.ondrop=j.ondrop=function(a){for(var c=a.dataTransfer.files,d=0;d<c.length;d++){var p=c[d],i=
c.length;if(0==p.type.indexOf("image"))(function(a){var b=a.name,d=a.type;"undefined"==typeof FileReader&&alert("Sorry, FileReader() not supported, switch to Chrome and try again.");var c=new FileReader;c.onload=function(a){var c=a.target.result,g=new Image;g.onload=function(){var a,e;a=parseInt(g.width);e=parseInt(g.height);k.push({el:g,w:a,h:e,x:0,y:0,name:b,type:d,base64:c});--i;0===i&&(r(),l())};g.src=c};c.readAsDataURL(a)})(p);else{var g=new FileReader;g.readAsText(p);g.onload=function(a){try{var c=
JSON.parse(a.target.result)}catch(d){alert("wrong file!")}c.config&&(b=c.config,E(),v());c.objects&&(k=[],c.objects.map(function(a){var b=new Image;e("img").appendChild(b);k.push({x:a.x,y:a.y,h:a.h,w:a.w,base64:a.base64,el:b,name:a.name});b.onload=void 0;b.src=a.base64}),l())}}}a.stopPropagation();a.preventDefault()};var F=function(a,b,d,e,i){if(2==arguments.length)return k.filter(function(d){return a>d.x&&a<d.x+d.w&&b>d.y&&b<d.y+d.h})[0];if(5==arguments.length)return k.some(function(g){return g.name==
i?!1:Math.abs(Math.min(g.x,a)-Math.max(g.x+g.w,a+d))<g.w+d&&Math.abs(Math.min(g.y,b)-Math.max(g.y+g.h,b+e))<g.h+e})},N=function(a,c,d,e,i){if(!b.if_magnet)return!1;var g=b.magnet_distance,f=k.filter(function(a){return a.name!=i}),m=[],h=[];f.map(function(a){m.push({x:a.x});m.push({x:a.x+a.w})});f.map(function(a){h.push({y:a.y});h.push({y:a.y+a.h})});m.map(function(b){0>=Math.abs(b.x-a)-Math.abs(b.x-a-d)?b.setx=b.x:b.setx=b.x-d;b.distance=Math.min(Math.abs(b.x-a),Math.abs(b.x-a-d))});h.map(function(a){0>=
Math.abs(a.y-c)-Math.abs(a.y-c-e)?a.sety=a.y:a.sety=a.y-e;a.distance=Math.min(Math.abs(a.y-c),Math.abs(a.y-c-e))});var f=m.reduce(function(a,b){return a.distance<=b.distance?a:b}),j=h.reduce(function(a,b){return a.distance<=b.distance?a:b});if(f.distance<g||j.distance<g)return{nearx:f.distance<g&&f,neary:j.distance<g&&j}},u=null,S=function(a){u=null;u=function(){!1!==a.nearx&&(h.beginPath(),h.moveTo(a.nearx.x,0),h.lineTo(a.nearx.x,b.canvas_height),h.stroke());!1!==a.neary&&(h.beginPath(),h.moveTo(0,
a.neary.y),h.lineTo(b.canvas_width,a.neary.y),h.stroke());h.fillStyle="red";!1!==a.nearx&&!1!==a.neary?(h.fillText([a.nearx.x,a.neary.y].join(),a.nearx.x+3,a.neary.y-3),h.beginPath(),h.arc(a.nearx.x,a.neary.y,3,2*Math.PI,!1),h.fill()):!1!==a.nearx?(h.fillText([a.nearx.x,f.y].join(),a.nearx.x+3,f.y-3),h.beginPath(),h.arc(a.nearx.x,f.y,3,2*Math.PI,!1),h.fill()):!1!==a.neary&&(h.fillText([f.x,a.neary.y].join(),f.x+3,a.neary.y-3),h.beginPath(),h.arc(f.x,a.neary.y,3,2*Math.PI,!1),h.fill())}},f,D=0,x,y;
o.onmousemove=j.onmousemove=function(a){var b=a.offsetX||a.layerX,a=a.offsetY||a.layerY;if(f){t.setXY(b,a);var d=f.x+(b-x),e=f.y+(a-y);F(d,e,f.w,f.h,f.name)||(f.x=d,f.y=e,x=b,y=a,(b=N(d,e,f.w,f.h,f.name))?S(b):u=null,l())}else document.body.style.cursor=F(b,a)?"pointer":""};o.onmousedown=j.onmousedown=function(a){D=1;x=a.offsetX||a.layerX;y=a.offsetY||a.layerY;f=F(x,y);t.setXY(x,y);l();document.body.style.cursor="pointer"};o.onmouseup=j.onmouseup=function(){D=0;document.body.style.cursor="normal";
t.clear();if(f){var a=N(f.x,f.y,f.w,f.h,f.name);a&&(!1!==a.nearx&&(f.x=a.nearx.setx),!1!==a.neary&&(f.y=a.neary.sety));u=null;l();f=null}};var n=function(a,b){a.className.match(RegExp("(^|\\s)"+b+"(\\s|$)"))||(a.className+=" "+b)},w=function(a,b){a.className=a.className.replace(RegExp("(^|\\s)"+b+"(\\s|$)"),"")},e=function(a){return"."==a.substring(0,1)?document.getElementsByClassName(a.substring(1)):"#"==a.substring(0,1)?document.getElementById(a.substring(1)):document.getElementById(a)},z=function(a){return Array.prototype.concat.apply([],
a)},E=function(){e("canvas_width").placeholder=b.canvas_width;e("canvas_height").placeholder=b.canvas_height;z(e("packer_modes_fixed").getElementsByTagName("button")).concat(z(e("packer_modes_grow").getElementsByTagName("button"))).map(function(a){w(a,"active")});switch(b.packer_mode){case "bintree":r=L;n(e(b.packer_mode),"active");break;case "vertical":r=K;n(e(b.packer_mode),"active");break;case "bintreeGrow":r=M,n(e(b.packer_mode),"active")}z(e("zoom_factors").getElementsByTagName("button")).map(function(a){w(a,
"active")});b.if_zoom?2==b.zoom?n(e("2x"),"active"):4==b.zoom&&n(e("4x"),"active"):n(e("1x"),"active");e("zoom_setting_value").placeholder=b.zoom_radius;b.if_magnet?n(e("magnet"),"active"):w(e("magnet"),"active");e("magnet_setting_value").placeholder=b.magnet_distance;e("relative_path").placeholder=b.relative_path;e("absolute_path").placeholder=b.absolute_path;e("css_template").value=b.template},A=function(){var a=function(a,b){for(var d=e(a)[0].getElementsByTagName("li"),c=d[0],f=e(c.getAttribute("data-toggle")),
h=0;h<d.length;h++){var j=d[h];j.onclick=function(a){return function(){c!=a&&(c.className="",f.style.display="none",c=a,f=e(c.getAttribute("data-toggle")),c.className="active",f.style.display="block",b&&b(c.getAttribute("data-toggle")))}}(j)}},c=function(a,b,d){var c=e(a);c.onclick=function(a){a.preventDefault();c.className.match(/(^|\s)active(\s|$)/)?(w(c,"active"),d&&d(c)):(n(c,"active"),b&&b(c))}},d=function(a){var b=e(a);b.onclick=function(){b.onclick=null;b.parentNode.parentNode.removeChild(b.parentNode)}},
f=function(a,b){for(var d="string"==typeof a?e(a).getElementsByTagName("button"):a,c=0;c<d.length;c++){var f=d[c];f.onclick=function(a){return function(c){c.preventDefault();n(a,"active");for(c=0;c<d.length;c++){var e=d[c];e!=a&&w(e,"active")}b&&b(a)}}(f)}};return function(){a(".nav-tabs");f(z(e("packer_modes_fixed").getElementsByTagName("button")).concat(z(e("packer_modes_grow").getElementsByTagName("button"))),function(a){a=a.id;switch(a){case "vertical":r=K;break;case "bintree":r=L;break;case "bintreeGrow":r=
M}b.packer_mode=a;r();l()});f("zoom_factors",function(a){switch(a.id){case "1x":b.if_zoom=!1;break;case "2x":b.if_zoom=!0;b.zoom=2;break;case "4x":b.if_zoom=!0,b.zoom=4}});e("zoom_setting_apply").onclick=function(a){a.preventDefault();if(a=e("zoom_setting_value").value)b.zoom_radius=parseInt(a)};c("magnet",function(){b.if_magnet=!0},function(){b.if_magnet=!1});e("magnet_setting_apply").onclick=function(a){a.preventDefault();if(a=e("magnet_setting_value").value)b.magnet_distance=parseInt(a)};e("make").onclick=
function(){R();for(var a=e(".png_and_css"),b=0;b<a.length;b++)n(a[b],"yellow_inform");setTimeout(function(){for(var b=0;b<a.length;b++)w(a[b],"yellow_inform")},600)};e("canvas_sizes_apply").onclick=function(a){a.preventDefault();b.canvas_width=e("canvas_width").value||b.canvas_width;b.canvas_height=e("canvas_height").value||b.canvas_height;v()};e("css_template_apply").onclick=function(a){a.preventDefault();b.template=e("css_template").value;b.absolute_path=e("absolute_path").value;b.relative_path=
e("relative_path").value};e("css_template_reset").onclick=function(a){a.preventDefault();E()};e("export_workspace").onclick=function(a){a.stopPropagation();a={};a.config=b;a.objects=k.map(function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,base64:a.base64,name:a.name}});a=G(JSON.stringify(a));e("export_workspace").href="data:text/json;base64,"+a};d("browser_notice")}}(),P=function c(b,e){var f=!/\W/.test(b)?cache[b]=cache[b]||c(document.getElementById(b).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+
b.replace(/[\r\t]/g," ").replace(/[\n]/g,"[enter]").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return e?f(e):f};E();A();v();t.init();h.font="28pt Calibri";h.fillText("drop Images or an export file here...",b.canvas_width/2-260,b.canvas_height/2-40);h.font="10pt Calibri"})("gopng");
	</script>
	<div id="ta">
	<script type="text/javascript" src="http://tajs.qq.com/stats?sId=9504671" charset="UTF-8"></script>	
	</div>	
	</body>



	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-32103657-1']);
	  _gaq.push(['_trackPageview']);
	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</html>
