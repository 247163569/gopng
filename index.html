<!DOCTYPE html>
<!--<html manifest="cache.manifest">-->
<html>
	<head>
		<meta charset="utf-8" />
		<meta author="duwei pandorid[at]gmail.com" />
		<meta version="0.1.1alpha" />
		<meta name="description" content="html5 css sprite tool gopng" />
		<title>GoPng</title>
		<link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="http://qplus1.idqqimg.com/module/common/scrollbar/scrollstyle.css">
		<style>
			#canvas {
				border:1px solid #c3c3c3;
			}
			img {
				border:1px solid yellow;
			}
			#layout {
				position: relative;
				overflow: auto;
			}
			#grid_canvas{
				position: absolute;
				o:0px;
				top:0px;
			}
			#zoom_canvas{
				position: absolute;
				o:0px;
				top:0px;
				display: none;
			}
			#css_html_template, #png_out, #css_out, #export{
				display: none;
			}
			.png_and_css{
				-webkit-transition:background-color .5s ease-in-out;
				transition:all .5s ease-in-out;
			}
			.yellow_inform {
				background-color: yellow;
			}
			#png_link, #css_link{
				display: none;
			}
			#absolute_path, #relative_path, #css_template{
				width: 580px;
			}
			.github_icon{
				width: 18px;
				height: 18px;
				background:url(./img/github_icon.png) no-repeat 0px 2px;
				float:left;
			}
			#ta{
				display: none;
			}

		</style>
	</head> 
	<body>
		<p></p>
		<div class="container">

			<div class="row">
				<div class="span8">
					<ul class="nav nav-tabs">
						<li class="active" data-toggle="layout" >
							<a href="###">Canvas</a>
						</li>
						<li class="" data-toggle="css_html_template">
							<a href="###">Css Template</a>
						</li>
						<li class="" data-toggle="png_out" >
							<a href="###" class="png_and_css">Png</a>
						</li>
						<li class="" data-toggle="css_out" >
							<a href="###" class="png_and_css">CSS</a>
						</li>
						<li class="" data-toggle="export" >
							<a href="###" class="png_and_css">Export</a>
						</li>
					</ul>
					<div id="layout">
						<canvas id="grid_canvas">
							You browser does not support the canvas elements.
						</canvas>
						<canvas id="canvas">
							You browser does not support the canvas elements.
						</canvas>
						<canvas id="zoom_canvas">
							You browser does not support the canvas elements.
						</canvas>
					</div>
					<div id="css_html_template">
						<form class="form-horizontal">
							<fieldset>
								<h6>Css template</h6>
								<div class="control-group">
									<label class="control-label">Sprite absolute path</label>
									<div class="controls docs-input-sizes">
										<input class="input-xlarge" type="text" placeholder='' id="absolute_path" />
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Sprite relative path</label>
									<div class="controls docs-input-sizes">
										<input class="input-xlarge" type="text" placeholder='' id="relative_path" />
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Css Template</label>
									<div class="controls">
										<textarea class="input-xlarge" id="css_template" rows="25">
										</textarea>

										<p class="help-block">Using John Resig's Micro-Templating</p>
										<p class="help-block">Variables can be uesd: relative_path, absolute_path, x, y, w, h, name</p>
										<p>
											<img src="./img/cord.png" title="about x,y,w,h" />
										</p>
										<p>name for fileName without ext</p>
									</div>
								</div>
								<div class="form-actions">
									<button type="submit" class="btn btn-primary" id="css_template_apply">Apply changes</button>
									<button class="btn" id="css_template_reset">Reset</button>
								</div>
							</fieldset>
						</form>
					</div>
					<div id="png_out">
						<div class="row">
								<div class="span2">
									<p>
										<a id="png_link" download="sprite.png" target="_blank" title="download png" href="###">
											<button class="btn btn-info">
												<i class="icon-file icon-white"></i>Download
											</button>
										</a>
									</p>
								</div>
								<div class="span2">

								</div>
						</div>
						<div id="img"></div>
					</div>
					<div id="css_out">
						<p>
							<a class="btn btn-info" id="css_link" download="style.css" target="_blank" title="download css" href="###"><i class="icon-file icon-white"></i>Download</a>
						</p>
						<h6>css code:</h6>
						<pre id="target_css">
						</pre>
					</div>
					<div id="export">
						<div class="hero-unit">
							<h1>Export!</h1>
							<p>Export and save the file, then you can recover your workspace by drop it on the canvas next time!</p>
							<p>
								<a class="btn btn-primary btn-large" download="export.json" id="export_workspace" href="###">Export</a>
							</p>
						</div>
					</div>
					
					<p>
						<div class="alert">
						  <button class="close" data-dismiss="alert" id="browser_notice">Ã—</button>
						  <strong>Notice!</strong> This HTML5 app is only tested for Chrome 18+(recommend) and Firefox 10+ now.
						</div>
					</p>
					
				</div>
				<div class="span4">
					<div class="well">
						<div class="row">
							<div class="span1">
								<h3>Go!PNG</h3>
							</div>
							<div class="offset2">
								<button class="btn btn-success" id="make">Make Png & css</button>
							</div>
						</div>
						<form class="form-horizontal">
							<fieldset>
								<h6>Canvas sizes</h6>
								<div class="control-group">
									<label class="control-label">Canvas width</label>
									<div class="controls docs-input-sizes">
										<input class="input-small" type="text" placeholder='' id="canvas_width" />
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Canvas Height</label>
									<div class="controls docs-input-sizes">
										<input class="input-small" type="text" placeholder='' id="canvas_height" />
									</div>
								</div>
								<div class="form-actions">
									<button type="submit" class="btn btn-primary" id="canvas_sizes_apply">Apply changes</button>
								</div>
							</fieldset>
							<fieldset>
								<h6>Packer modes</h6>
								<div class="control-group">
									<label class="control-label">Fixed Size</label>
									<div class="controls">
										<div class="btn-group" id="packer_modes_fixed">
											<button class="btn btn-primary" id="vertical">Vertical</button>
											<button class="btn btn-primary" id="bintree">BinTree</button>
										</div>
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Auto Grow</label>
									<div class="controls">
										<div class="btn-group" id="packer_modes_grow">
											<!--<button class="btn btn-primary disabled" id="verticalGrow" onclick="return false;">Vertical</button>-->
											<button class="btn btn-primary" id="bintreeGrow" onclick="return false;">BinTree</button>
											<button class="btn btn-primary" id="Minimize" onclick="return false;">Minimize</button>
										</div>
									</div>
								</div>
								<div class="form-actions">
								</div>
							</fieldset>
							<fieldset>
								<h6>Zoom setting</h6>
								<div class="control-group">
									<label class="control-label">Zoom mode</label>
									<div class="controls">
										<div class="btn-group" id="zoom_factors">
											<button class="btn btn-primary" id="1x">1X</button>
											<button class="btn btn-primary" id="2x">2X</button>
											<button class="btn btn-primary" id="4x">4X</button>
										</div>
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Zoom raduis</label>
									<div class="controls docs-input-sizes">
										<input class="input-small" type="text" placeholder='' id="zoom_setting_value" />
									</div>
								</div>
								<div class="form-actions">
									<button type="submit" class="btn btn-primary" id="zoom_setting_apply">Apply changes</button>
								</div>
							</fieldset>
							<fieldset>
								<h6>Magnet setting</h6>
								<div class="control-group">
									<label class="control-label">Magnet</label>
									<div class="controls">
										<button class="btn btn-primary" id="magnet">Magnet!</button>
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Magnet distance</label>
									<div class="controls docs-input-sizes">
										<input class="input-small" type="text" placeholder='' id="magnet_setting_value"/>
									</div>
								</div>
								<div class="form-actions">
									<button type="submit" class="btn btn-primary" id="magnet_setting_apply">Apply changes</button>
								</div>
							</fieldset>
						</form>
						<p>
							<a class="btn" style="margin-left:100px;" title="view on github" href="https://github.com/AlloyTeam/gopng" target="_blank"><span class="github_icon"></span>View On GitHub</a>
						</p>
						<p>
							<a class="btn" style="margin-left:100px;" title="view on github" href="http://www.alloyteam.com/2012/05/gopng%E9%9B%AA%E7%A2%A7%E5%9B%BE%E5%90%88%E6%88%90%E5%B7%A5%E5%85%B7-%E5%8F%A6%E4%B8%80%E4%B8%AAhtml5-app/" target="_blank"><i class="icon-book"></i>&nbspGet some help&nbsp</a>
						</p>
					</div>
				</div>

			</div>
		</div>
	<script>
		(function(C){function I(b){var c,a,m="",d=[],g=0;a=c=0;for(var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("");a=b.charCodeAt(c++);)128>a?d[d.length]=a:(2048>a?d[d.length]=192|a>>6:(65536>a?d[d.length]=224|a>>12:(d[d.length]=240|a>>18,d[d.length]=128|a>>12&63),d[d.length]=128|a>>6&63),d[d.length]=128|a&63);for(;g<d.length;)b=d[g++],c=d[g++],a=d[g++],m+=k[b>>2],m+=k[(b&3)<<4|c>>4],m+=k[void 0===c?64:(c&15)<<2|a>>6],m+=k[void 0===a?64:a&63];return m}var C=window[C]={},
c={canvas_width:600,canvas_height:600,packer_mode:"bintree",if_magnet:!0,magnet_distance:8,if_zoom:!0,zoom_pixel:!0,zoom:2,zoom_radius:200,absolute_path:"http://gopng/static/images/sprite.png",relative_path:"",template:'#gopng_<%=name%>_outer {\nheight: <%=h%>px;\nwidth: <%=w%>px;\noverflow: hidden;\n}\n#gopng_<%=name%> {\nbackground: url(<%=absolute_path%>) -<%=x%>px -<%=y%>px no-repeat;\nwidth: 100%;\nheight: 100%;\n_background: none;\n_padding-left: <%=x%>px;\n_margin-left: -<%=x%>px;\n_padding-top: <%=y%>px;\n_margin-top: -<%=y%>px;\n_filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=crop,src="<%=absolute_path%>");\n}\n'},
J,K,j=document.getElementById("canvas");document.getElementById("grid_canvas").getContext("2d");var n=document.getElementById("zoom_canvas"),u=n.getContext("2d"),h=j.getContext("2d"),i=[],w=function(){var b,e,a=function(){u.clearRect(0,0,c.canvas_width*c.zoom,c.canvas_height*c.zoom)};return{setXY:function(a,d){b=parseInt(a);e=parseInt(d)},snap:function(){if(F&&c.if_zoom){var a=c.zoom_radius,d=c.zoom;w.clear();if(c.zoom_pixel){for(var g=Math.floor(a/d),k=2*g,l=2*g,d=b,f=e,D=2*a,v=2*a,g=h.getImageData(b-
g,e-g,k,l).data,i=h.createImageData(D,v),j=i.data,n=[],o=k/D,q=0,p=0;p<D;++p)n[p]=4*Math.floor(q),q+=o;o=[];q=l/v;for(p=l=0;p<v;++p)o[p]=4*k*Math.floor(l),l+=q;for(l=k=0;l<v;++l)for(q=0;q<D;++q)p=n[q]+o[l],j[k++]=g[p++],j[k++]=g[p++],j[k++]=g[p++],j[k++]=g[p++];u.putImageData(i,d,f)}u.globalCompositeOperation="destination-in";u.beginPath();u.arc(b+a,e+a,a,2*Math.PI,!1);u.fill();u.globalCompositeOperation="source-over"}},destory:function(){a();n.style.display="none";zoom_canvas_bg.style.display="none"},
clear:a,init:function(){n.style.display="block"}}}(),o=function(){h.clearRect(0,0,j.width,j.height);i.map(function(b){h.drawImage(b.el,b.x,b.y)});x&&x();w.snap()},s=function(){j.height=c.canvas_height;j.width=c.canvas_width;n.height=2*c.canvas_height;n.width=2*c.canvas_width;o()},R=function(){if(i.length){O();L();o();dataURL=j.toDataURL();var b=new Image;b.src=dataURL;e("png_link").href=dataURL.replace("data:image/","data:image/");e("png_link").style.display="inline";document.getElementById("img").innerHTML=
"";document.getElementById("img").appendChild(b);L(c.canvas_width,c.canvas_height);o();var r=[];i.map(function(a){a=P(c.template,{w:a.w,h:a.h,x:a.x,y:a.y,absolute_path:c.absolute_path,name:a.name.split(".")[0],relative_path:c.relative_path});r.push(a)});b=r.join("").split("[enter]").join("\n");e("css_link").href="data:text/css;base64,"+I(b);e("target_css").innerHTML=Q(b);e("css_link").style.display="inline"}},Q=function(b){return b=b.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,
"&quot;").replace(/'/g,"&#39;")},L=function(b,c){!b&&!c?(j.width=K,j.height=J):(j.width=b,j.height=c)},E=function(){},M=function(){var b=function(a,b){this.init(a,b)};b.prototype={init:function(a,b){this.root={x:0,y:0,w:a,h:b}},fit:function(a){var b,d=this,g;a.map(function(a){if(b=d.findNode(d.root,a.w,a.h)){var c=d.splitNode(b,a.w,a.h);a.x=c.x;a.y=c.y}else g=!0});return g?{error:"notfind"}:{}},findNode:function(a,b,d){return a.used?this.findNode(a.right,b,d)||this.findNode(a.down,b,d):b<=a.w&&d<=
a.h?a:null},splitNode:function(a,b,d){a.used=!0;a.down={x:a.x,y:a.y+d,w:a.w,h:a.h-d};a.right={x:a.x+b,y:a.y,w:a.w-b,h:d};return a}};var r=function(){};r.prototype={fit:function(a){var b,d=a.length,c=this;this.root={x:0,y:0,w:d?a[0].w:0,h:d?a[0].h:0};a.map(function(a){var d=(b=c.findNode(c.root,a.w,a.h))?c.splitNode(b,a.w,a.h):c.growNode(a.w,a.h);a.x=d.x;a.y=d.y});return this.root},findNode:function(a,b,d){return a.used?this.findNode(a.right,b,d)||this.findNode(a.down,b,d):b<=a.w&&d<=a.h?a:null},splitNode:function(a,
b,d){a.used=!0;a.down={x:a.x,y:a.y+d,w:a.w,h:a.h-d};a.right={x:a.x+b,y:a.y,w:a.w-b,h:d};return a},growNode:function(a,b){var d=b<=this.root.h,c=a<=this.root.w,e=c&&this.root.w>=this.root.h+b;if(d&&this.root.h>=this.root.w+a)return this.growRight(a,b);if(e)return this.growDown(a,b);if(d)return this.growRight(a,b);if(c)return this.growDown(a,b)},growRight:function(a,b){this.root={used:!0,x:0,y:0,w:this.root.w+a,h:this.root.h,down:this.root.down,right:{x:this.root.w,y:0,w:a,h:this.root.h}};node=this.findNode(this.root,
a,b);return this.splitNode(node,a,b)},growDown:function(a,b){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+b,down:{x:0,y:this.root.h,w:this.root.w,h:b},right:this.root.right};node=this.findNode(this.root,a,b);return this.splitNode(node,a,b)}};return{bintree:function(){s();var a=new b(c.canvas_width,c.canvas_height);i.sort(function(a,b){return 0!=b.h-a.h?b.h-a.h:a.w-b.w});a.fit(i).error&&alert("not fit!")},vertical:function(){s();var a=0;i.map(function(b){b.y=a;b.x=0;a+=b.h});a>c.canvas_height&&
alert("not fit!")},bintreeGrow:function(){var a=new r;i.length&&(i.sort(function(a,b){return 0!=b.h-a.h?b.h-a.h:a.w-b.w}),a=a.fit(i),c.canvas_width=a.w,c.canvas_height=a.h,s(),e("canvas_width").value=c.canvas_width,e("canvas_height").value=c.canvas_height)},Minimize:function(){s();var a=new r;if(i.length){i.sort(function(a,b){return 0!=b.h-a.h?b.h-a.h:a.w-b.w});for(var m=i.reduce(function(a,b){return a.w>b.w?a:b}).w,d=a.fit(i),a=d.w,d=d.h,g=d*a,k,l,f;a-- >m;){f=new b(a,d);f=f.fit(i);if(f.error)for(;f.error;)f=
new b(a,d),f=f.fit(i),d++;a*d<g&&(g=d*a,k=a,l=d)}(new b(k,l)).fit(i);c.canvas_width=k;c.canvas_height=l;s();e("canvas_width").value=c.canvas_width;e("canvas_height").value=c.canvas_height}}}}(),O=function(){var b=i.reduce(function(a,b){return a.w+a.x>b.w+b.x?a:b}),c=i.reduce(function(a,b){return a.h+a.y>b.h+b.y?a:b});J=c.h+c.y;K=b.w+b.x};n.ondragenter=j.ondragenter=function(){return!1};n.ondragover=j.ondragover=function(){return!1};n.ondrop=j.ondrop=function(b){for(var f=b.dataTransfer.files,a=0;a<
f.length;a++){var m=f[a],d=f.length;if(0==m.type.indexOf("image"))(function(a){var b=a.name,c=a.type;"undefined"==typeof FileReader&&alert("Sorry, FileReader() not supported, switch to Chrome and try again.");var g=new FileReader;g.onload=function(a){var g=a.target.result,e=new Image;e.onload=function(){var a,v;a=parseInt(e.width);v=parseInt(e.height);i.push({el:e,w:a,h:v,x:0,y:0,name:b,type:c,base64:g});--d;0===d&&(E(),o())};e.src=g};g.readAsDataURL(a)})(m);else{var g=new FileReader;g.readAsText(m);
g.onload=function(a){try{var b=JSON.parse(a.target.result)}catch(d){alert("wrong file!")}b.config&&(c=b.config,G(),s());b.objects&&(i=[],b.objects.map(function(a){var b=new Image;e("img").appendChild(b);i.push({x:a.x,y:a.y,h:a.h,w:a.w,base64:a.base64,el:b,name:a.name});b.onload=void 0;b.src=a.base64}),o())}}}b.stopPropagation();b.preventDefault()};var H=function(b,c,a,e,d){if(2==arguments.length)return i.filter(function(a){return b>a.x&&b<a.x+a.w&&c>a.y&&c<a.y+a.h})[0];if(5==arguments.length)return i.some(function(g){return g.name==
d?!1:Math.abs(Math.min(g.x,b)-Math.max(g.x+g.w,b+a))<g.w+a&&Math.abs(Math.min(g.y,c)-Math.max(g.y+g.h,c+e))<g.h+e})},N=function(b,e,a,f,d){if(!c.if_magnet)return!1;var g=c.magnet_distance,k=i.filter(function(a){return a.name!=d}),l=[],h=[];k.map(function(a){l.push({x:a.x});l.push({x:a.x+a.w})});k.map(function(a){h.push({y:a.y});h.push({y:a.y+a.h})});l.map(function(d){0>=Math.abs(d.x-b)-Math.abs(d.x-b-a)?d.setx=d.x:d.setx=d.x-a;d.distance=Math.min(Math.abs(d.x-b),Math.abs(d.x-b-a))});h.map(function(a){0>=
Math.abs(a.y-e)-Math.abs(a.y-e-f)?a.sety=a.y:a.sety=a.y-f;a.distance=Math.min(Math.abs(a.y-e),Math.abs(a.y-e-f))});var k=l.reduce(function(a,b){return a.distance<=b.distance?a:b}),j=h.reduce(function(a,b){return a.distance<=b.distance?a:b});if(k.distance<g||j.distance<g)return{nearx:k.distance<g&&k,neary:j.distance<g&&j}},x=null,S=function(b){x=null;x=function(){!1!==b.nearx&&(h.beginPath(),h.moveTo(b.nearx.x,0),h.lineTo(b.nearx.x,c.canvas_height),h.stroke());!1!==b.neary&&(h.beginPath(),h.moveTo(0,
b.neary.y),h.lineTo(c.canvas_width,b.neary.y),h.stroke());h.fillStyle="red";!1!==b.nearx&&!1!==b.neary?(h.fillText([b.nearx.x,b.neary.y].join(),b.nearx.x+3,b.neary.y-3),h.beginPath(),h.arc(b.nearx.x,b.neary.y,3,2*Math.PI,!1),h.fill()):!1!==b.nearx?(h.fillText([b.nearx.x,f.y].join(),b.nearx.x+3,f.y-3),h.beginPath(),h.arc(b.nearx.x,f.y,3,2*Math.PI,!1),h.fill()):!1!==b.neary&&(h.fillText([f.x,b.neary.y].join(),f.x+3,b.neary.y-3),h.beginPath(),h.arc(f.x,b.neary.y,3,2*Math.PI,!1),h.fill())}},f,F=0,z,A;
n.onmousemove=j.onmousemove=function(b){var c=b.offsetX||b.layerX,b=b.offsetY||b.layerY;if(f){w.setXY(c,b);var a=f.x+(c-z),e=f.y+(b-A);H(a,e,f.w,f.h,f.name)||(f.x=a,f.y=e,z=c,A=b,(c=N(a,e,f.w,f.h,f.name))?S(c):x=null,o())}else document.body.style.cursor=H(c,b)?"pointer":""};n.onmousedown=j.onmousedown=function(b){F=1;z=b.offsetX||b.layerX;A=b.offsetY||b.layerY;f=H(z,A);w.setXY(z,A);o();document.body.style.cursor="pointer"};n.onmouseup=j.onmouseup=function(){F=0;document.body.style.cursor="normal";
w.clear();if(f){var b=N(f.x,f.y,f.w,f.h,f.name);b&&(!1!==b.nearx&&(f.x=b.nearx.setx),!1!==b.neary&&(f.y=b.neary.sety));x=null;o();f=null}};var t=function(b,c){b.className.match(RegExp("(^|\\s)"+c+"(\\s|$)"))||(b.className+=" "+c)},y=function(b,c){b.className=b.className.replace(RegExp("(^|\\s)"+c+"(\\s|$)"),"")},e=function(b){return"."==b.substring(0,1)?document.getElementsByClassName(b.substring(1)):"#"==b.substring(0,1)?document.getElementById(b.substring(1)):document.getElementById(b)},B=function(b){return Array.prototype.concat.apply([],
b)},G=function(){e("canvas_width").placeholder=c.canvas_width;e("canvas_height").placeholder=c.canvas_height;B(e("packer_modes_fixed").getElementsByTagName("button")).concat(B(e("packer_modes_grow").getElementsByTagName("button"))).map(function(b){y(b,"active")});switch(c.packer_mode){case "bintree":case "vertical":case "bintreeGrow":case "Minimize":E=M[c.packer_mode],t(e(c.packer_mode),"active")}B(e("zoom_factors").getElementsByTagName("button")).map(function(b){y(b,"active")});c.if_zoom?2==c.zoom?
t(e("2x"),"active"):4==c.zoom&&t(e("4x"),"active"):t(e("1x"),"active");e("zoom_setting_value").placeholder=c.zoom_radius;c.if_magnet?t(e("magnet"),"active"):y(e("magnet"),"active");e("magnet_setting_value").placeholder=c.magnet_distance;e("relative_path").placeholder=c.relative_path;e("absolute_path").placeholder=c.absolute_path;e("css_template").value=c.template},C=function(){var b=function(a,b){for(var c=e(a)[0].getElementsByTagName("li"),f=c[0],h=e(f.getAttribute("data-toggle")),i=0;i<c.length;i++){var j=
c[i];j.onclick=function(a){return function(){f!=a&&(f.className="",h.style.display="none",f=a,h=e(f.getAttribute("data-toggle")),f.className="active",h.style.display="block",b&&b(f.getAttribute("data-toggle")))}}(j)}},f=function(a,b,c){var f=e(a);f.onclick=function(a){a.preventDefault();f.className.match(/(^|\s)active(\s|$)/)?(y(f,"active"),c&&c(f)):(t(f,"active"),b&&b(f))}},a=function(a){var b=e(a);b.onclick=function(){b.onclick=null;b.parentNode.parentNode.removeChild(b.parentNode)}},h=function(a,
b){for(var c="string"==typeof a?e(a).getElementsByTagName("button"):a,f=0;f<c.length;f++){var h=c[f];h.onclick=function(a){return function(d){d.preventDefault();t(a,"active");for(d=0;d<c.length;d++){var e=c[d];e!=a&&y(e,"active")}b&&b(a)}}(h)}};return function(){b(".nav-tabs");h(B(e("packer_modes_fixed").getElementsByTagName("button")).concat(B(e("packer_modes_grow").getElementsByTagName("button"))),function(a){a=a.id;switch(a){case "vertical":case "bintree":case "bintreeGrow":case "Minimize":E=M[a]}c.packer_mode=
a;E();o()});h("zoom_factors",function(a){switch(a.id){case "1x":c.if_zoom=!1;break;case "2x":c.if_zoom=!0;c.zoom=2;break;case "4x":c.if_zoom=!0,c.zoom=4}});e("zoom_setting_apply").onclick=function(a){a.preventDefault();if(a=e("zoom_setting_value").value)c.zoom_radius=parseInt(a)};f("magnet",function(){c.if_magnet=!0},function(){c.if_magnet=!1});e("magnet_setting_apply").onclick=function(a){a.preventDefault();if(a=e("magnet_setting_value").value)c.magnet_distance=parseInt(a)};e("make").onclick=function(){R();
for(var a=e(".png_and_css"),b=0;b<a.length;b++)t(a[b],"yellow_inform");setTimeout(function(){for(var b=0;b<a.length;b++)y(a[b],"yellow_inform")},600)};e("canvas_sizes_apply").onclick=function(a){a.preventDefault();c.canvas_width=e("canvas_width").value||c.canvas_width;c.canvas_height=e("canvas_height").value||c.canvas_height;s()};e("css_template_apply").onclick=function(a){a.preventDefault();c.template=e("css_template").value;c.absolute_path=e("absolute_path").value;c.relative_path=e("relative_path").value};
e("css_template_reset").onclick=function(a){a.preventDefault();G()};e("export_workspace").onclick=function(a){a.stopPropagation();a={};a.config=c;a.objects=i.map(function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,base64:a.base64,name:a.name}});a=I(JSON.stringify(a));e("export_workspace").href="data:text/json;base64,"+a};a("browser_notice")}}(),P=function r(a,c){var d=!/\W/.test(a)?cache[a]=cache[a]||r(document.getElementById(a).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+
a.replace(/[\r\t]/g," ").replace(/[\n]/g,"[enter]").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return c?d(c):d};G();C();s();w.init();h.font="28pt Calibri";h.fillText("drop Images or an export file here...",c.canvas_width/2-260,c.canvas_height/2-40);h.font="10pt Calibri"})("gopng");
	</script>
	<div id="ta">
	<script type="text/javascript" src="http://tajs.qq.com/stats?sId=9504671" charset="UTF-8"></script>	
	</div>	
	</body>



	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-32103657-1']);
	  _gaq.push(['_trackPageview']);
	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</html>
